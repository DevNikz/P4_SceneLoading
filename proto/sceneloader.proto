syntax = "proto3";

package scene;

// Request to fetch a scene manifest (list of models)
message SceneRequest {
  string scene_id = 1;
}

// Info about a single model file in a scene
message ModelInfo {
  string name = 1;        // friendly name
  string rel_path = 2;    // path relative to Media/<scene_id>/
  int64 size_bytes = 3;   // expected size in bytes (for progress)
}

// Manifest listing models and optional thumbnail bytes
message SceneManifest {
  string scene_id = 1;
  repeated ModelInfo models = 2;
  bytes thumbnail = 3; // optional small image
}

// Request to stream a single model file
message ModelRequest {
  string scene_id = 1;
  string model_rel_path = 2;
  int64 offset = 3; // optional start offset (default 0)
}

// Chunk streamed from server
message Chunk {
  bytes data = 1;
  int64 offset = 2;
  bool last = 3;
}

// Service for scene-related RPCs
service SceneService {
  // Returns metadata about models in a scene
  rpc GetSceneManifest(SceneRequest) returns (SceneManifest);

  // Streams a model file in chunks
  rpc StreamModel(ModelRequest) returns (stream Chunk);
}